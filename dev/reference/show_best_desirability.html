<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Investigate best tuning parameters — show_best_desirability • desirability2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Investigate best tuning parameters — show_best_desirability"><meta name="description" content="Analogs to tune::show_best() and tune::select_best() that can
simultaneously optimize multiple metrics or characteristics using
desirability functions."><meta property="og:description" content="Analogs to tune::show_best() and tune::select_best() that can
simultaneously optimize multiple metrics or characteristics using
desirability functions."><meta name="robots" content="noindex"><script defer data-domain="desirability2.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">desirability2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/desirability2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Investigate best tuning parameters</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/desirability2/blob/main/R/tune.R" class="external-link"><code>R/tune.R</code></a></small>
      <div class="d-none name"><code>show_best_desirability.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Analogs to <code><a href="https://tune.tidymodels.org/reference/show_best.html" class="external-link">tune::show_best()</a></code> and <code><a href="https://tune.tidymodels.org/reference/show_best.html" class="external-link">tune::select_best()</a></code> that can
simultaneously optimize multiple metrics or characteristics using
desirability functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">show_best_desirability</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, n <span class="op">=</span> <span class="fl">5</span>, eval_time <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">select_best_desirability</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, eval_time <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>The results of <code><a href="https://tune.tidymodels.org/reference/tune_grid.html" class="external-link">tune_grid()</a></code> or <code><a href="https://tune.tidymodels.org/reference/tune_bayes.html" class="external-link">tune_bayes()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>One or more desirability selectors to configure the optimization.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>An integer for the number of top results/rows to return.</p></dd>


<dt id="arg-eval-time">eval_time<a class="anchor" aria-label="anchor" href="#arg-eval-time"></a></dt>
<dd><p>A single numeric time point where dynamic event time
metrics should be chosen (e.g., the time-dependent ROC curve, etc). The
values should be consistent with the values used to create <code>x</code>. The <code>NULL</code>
default will automatically use the first evaluation time used by <code>x</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>show_best_desirability()</code> returns a tibble with <code>n</code> rows while
<code>select_best_desirability()</code> returns a single row. When showing the results,
the metrics are presented in "wide format" (one column per metric) and there
are new columns for the corresponding desirability values (each starts with
<code>.d_</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Desirability functions might help when selecting the best model
based on more than one performance metric. The user creates a desirability
function to map values of a metric to a <code>[0, 1]</code> range where 1.0 is most
desirable and zero is unacceptable. After constructing these for the metric
of interest, the overall desirability is computed using the geometric mean
of the individual desirabilities.</p>
<p>The verbs that can be used in <code>...</code> (and their arguments) are:</p><ul><li><p><code><a href="aliases.html">maximize()</a></code> when larger values are better, such as the area under the ROC
score.</p></li>
<li><p><code><a href="aliases.html">minimize()</a></code> for metrics such as RMSE or the Brier score.</p></li>
<li><p><code><a href="aliases.html">target()</a></code> for cases when a specific value of the metric is important.</p></li>
<li><p><code><a href="aliases.html">constrain()</a></code> is used when there is a range of values that are equally
desirable.</p></li>
<li><p><code>categories()</code> is for situations where we want to set desirability for
qualitative columns.</p></li>
</ul><p>Except for <code>categories()</code>, these functions have arguments <code>low</code> and <code>high</code> to
set the ranges of the metrics. For example, using:</p>
<div class="sourceCode"><pre><code><span></span>
<span>  <span class="fu"><a href="../reference/aliases.html">minimize</a></span><span class="op">(</span><span class="va">rmse</span>, low <span class="op">=</span> <span class="fl">0.1</span>, high <span class="op">=</span> <span class="fl">2.0</span><span class="op">)</span></span></code></pre></div>

<p>means that values above 2.0 are unacceptable and that an RMSE of 0.1 is the
best possible outcome.</p>
<p>There is also an argument that can be used to state how important a metric is
in the optimization. By default, using <code>scale = 1</code> means that desirability
linearly changes between <code>low</code> and <code>high</code>. Using a <code>scale</code> value greater
than 1 will make it more difficult to satisfy the criterion when suboptimal
values are evaluated. Conversely, a value less than one will diminish the
influence of that metric. The <code>categories()</code> does not have a scaling
argument while <code><a href="aliases.html">target()</a></code> has two (<code>scale_low</code> and <code>scale_high</code>) for ranges
on either side of the <code>target</code>.</p>
<p>Here is an example that optimizes RMSE and the concordance correlation
coefficient (a.k.a. "ccc"), with more emphasis on the former:</p>
<div class="sourceCode"><pre><code>
  minimize(rmse, low = 0.10, high = 2.00, scale = 3.0),
  maximize(ccc,  low = 0.00, high = 1.00) # scale defaults to 1.0
</code></pre></div>

<p>If <code>low</code>, <code>high</code>, or <code>target</code> are not specified, the observed data are used
to estimate their values. For the previous example, if we were to use</p>
<div class="sourceCode"><pre><code>
  minimize(rmse, low = 0.10, high = 2.00, scale = 3.0),
  maximize(ccc)
</code></pre></div>

<p>and the concordance correlation coefficient statistics ranged from 0.21 to
0.35, the actual goals would  end up as:</p>
<div class="sourceCode"><pre><code>
  minimize(rmse, low = 0.10, high = 2.00, scale = 3.0),
  maximize(ccc,  low = 0.21, high = 0.35)
</code></pre></div>

<p>More than one variable can be used in a term as long as R can parse and
execute the expression. For example, you could define the Youden's J
statistic using</p>
<div class="sourceCode"><pre><code><span></span>
<span>  <span class="fu"><a href="../reference/aliases.html">maximize</a></span><span class="op">(</span><span class="va">sensitivity</span> <span class="op">+</span> <span class="va">specificity</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>

<p>(although there is a function for this metric in the <span class="pkg">yardstick</span> package).</p>
<p>If the columns of the data set have missing values, their corresponding
desirability will be missing. The overall desirability computation excludes
missing values.</p>
<p>We advise not referencing global values or inline functions inside of these
verbs.</p>
<p>Also note that there may be more than <code>n</code> values returned when showing the
results; there may be more than one model configuration that has identical
overall desirability.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Derringer, G. and Suich, R. (1980), Simultaneous Optimization of
Several Response Variables. <em>Journal of Quality Technology</em>, 12, 214-219.</p>
<p>Bartz-Beielstein, T. (2025). Multi-Objective Optimization and Hyperparameter
Tuning With Desirability Functions. arXiv preprint arXiv:2503.23595.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="inline_desirability.html">d_max()</a></code>, <code><a href="d_overall.html">d_overall()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># use pre-tuned results to demonstrate:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_installed.html" class="external-link">is_installed</a></span><span class="op">(</span><span class="st">"tune"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">show_best_desirability</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">tune</span><span class="fu">::</span><span class="va"><a href="https://tune.tidymodels.org/reference/example_ames_knn.html" class="external-link">ames_iter_search</a></span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="aliases.html">maximize</a></span><span class="op">(</span><span class="va">rsq</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="aliases.html">minimize</a></span><span class="op">(</span><span class="va">rmse</span>, scale <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">select_best_desirability</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">tune</span><span class="fu">::</span><span class="va"><a href="https://tune.tidymodels.org/reference/example_ames_knn.html" class="external-link">ames_iter_search</a></span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="aliases.html">maximize</a></span><span class="op">(</span><span class="va">rsq</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="aliases.html">minimize</a></span><span class="op">(</span><span class="va">rmse</span>, scale <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       K weight_func dist_power   lon   lat .config              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>    33 triweight        0.511    10     3 Preprocessor10_Model1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

